"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

class SequentialIDGenerator {
  constructor(prefix = "") {
    // ensure start with "ae" so "ad" is never produced
    this.prefix = prefix;
    this.count = 0;
    this.offset = 374;
    this.msb = 1295;
    this.power = 2;
  }

  next() {
    const id = this.increment().toString(36);
    return this.prefix ? `${this.prefix}${id}` : id;
  }

  increment() {
    const id = this.count + this.offset;

    if (id === this.msb) {
      this.offset += (this.msb + 1) * 9;
      this.msb = Math.pow(36, ++this.power) - 1;
    }

    this.count++;
    return id;
  }

}

exports.default = SequentialIDGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZXF1ZW50aWFsSURHZW5lcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByZWZpeCIsImNvdW50Iiwib2Zmc2V0IiwibXNiIiwicG93ZXIiLCJuZXh0IiwiaWQiLCJpbmNyZW1lbnQiLCJ0b1N0cmluZyIsIk1hdGgiLCJwb3ciXSwic291cmNlcyI6WyJzcmMvc2VxdWVudGlhbC1pZC1nZW5lcmF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VxdWVudGlhbElER2VuZXJhdG9yIHtcbiAgcHJlZml4OiBzdHJpbmc7XG4gIGNvdW50OiBudW1iZXI7XG4gIG9mZnNldDogbnVtYmVyO1xuICBtc2I6IG51bWJlcjtcbiAgcG93ZXI6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihwcmVmaXg6IHN0cmluZyA9IFwiXCIpIHtcbiAgICAvLyBlbnN1cmUgc3RhcnQgd2l0aCBcImFlXCIgc28gXCJhZFwiIGlzIG5ldmVyIHByb2R1Y2VkXG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy5vZmZzZXQgPSAzNzQ7XG4gICAgdGhpcy5tc2IgPSAxMjk1O1xuICAgIHRoaXMucG93ZXIgPSAyO1xuICB9XG5cbiAgbmV4dCgpIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuaW5jcmVtZW50KCkudG9TdHJpbmcoMzYpO1xuICAgIHJldHVybiB0aGlzLnByZWZpeCA/IGAke3RoaXMucHJlZml4fSR7aWR9YCA6IGlkO1xuICB9XG5cbiAgaW5jcmVtZW50KCkge1xuICAgIGNvbnN0IGlkID0gdGhpcy5jb3VudCArIHRoaXMub2Zmc2V0O1xuICAgIGlmIChpZCA9PT0gdGhpcy5tc2IpIHtcbiAgICAgIHRoaXMub2Zmc2V0ICs9ICh0aGlzLm1zYiArIDEpICogOTtcbiAgICAgIHRoaXMubXNiID0gTWF0aC5wb3coMzYsICsrdGhpcy5wb3dlcikgLSAxO1xuICAgIH1cbiAgICB0aGlzLmNvdW50Kys7XG4gICAgcmV0dXJuIGlkO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZSxNQUFNQSxxQkFBTixDQUE0QjtFQU96Q0MsV0FBVyxDQUFDQyxNQUFjLEdBQUcsRUFBbEIsRUFBc0I7SUFDL0I7SUFDQSxLQUFLQSxNQUFMLEdBQWNBLE1BQWQ7SUFDQSxLQUFLQyxLQUFMLEdBQWEsQ0FBYjtJQUNBLEtBQUtDLE1BQUwsR0FBYyxHQUFkO0lBQ0EsS0FBS0MsR0FBTCxHQUFXLElBQVg7SUFDQSxLQUFLQyxLQUFMLEdBQWEsQ0FBYjtFQUNEOztFQUVEQyxJQUFJLEdBQUc7SUFDTCxNQUFNQyxFQUFFLEdBQUcsS0FBS0MsU0FBTCxHQUFpQkMsUUFBakIsQ0FBMEIsRUFBMUIsQ0FBWDtJQUNBLE9BQU8sS0FBS1IsTUFBTCxHQUFlLEdBQUUsS0FBS0EsTUFBTyxHQUFFTSxFQUFHLEVBQWxDLEdBQXNDQSxFQUE3QztFQUNEOztFQUVEQyxTQUFTLEdBQUc7SUFDVixNQUFNRCxFQUFFLEdBQUcsS0FBS0wsS0FBTCxHQUFhLEtBQUtDLE1BQTdCOztJQUNBLElBQUlJLEVBQUUsS0FBSyxLQUFLSCxHQUFoQixFQUFxQjtNQUNuQixLQUFLRCxNQUFMLElBQWUsQ0FBQyxLQUFLQyxHQUFMLEdBQVcsQ0FBWixJQUFpQixDQUFoQztNQUNBLEtBQUtBLEdBQUwsR0FBV00sSUFBSSxDQUFDQyxHQUFMLENBQVMsRUFBVCxFQUFhLEVBQUUsS0FBS04sS0FBcEIsSUFBNkIsQ0FBeEM7SUFDRDs7SUFDRCxLQUFLSCxLQUFMO0lBQ0EsT0FBT0ssRUFBUDtFQUNEOztBQTdCd0MifQ==