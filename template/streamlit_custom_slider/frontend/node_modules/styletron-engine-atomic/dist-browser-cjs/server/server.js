"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.generateHtmlString = generateHtmlString;

var _sequentialIdGenerator = _interopRequireDefault(require("../sequential-id-generator"));

var _cache = require("../cache");

var _injectStylePrefixed = _interopRequireDefault(require("../inject-style-prefixed"));

var _css = require("../css");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class StyletronServer {
  constructor(opts = {}) {
    this.styleRules = {
      "": ""
    };
    this.styleCache = new _cache.MultiCache(new _sequentialIdGenerator.default(opts.prefix), media => {
      this.styleRules[media] = "";
    }, (cache, id, value) => {
      const {
        pseudo,
        block
      } = value;
      this.styleRules[cache.key] += (0, _css.styleBlockToRule)((0, _css.atomicSelector)(id, pseudo), block);
    });
    this.fontFaceRules = "";
    this.fontFaceCache = new _cache.Cache(new _sequentialIdGenerator.default(opts.prefix), (cache, id, value) => {
      this.fontFaceRules += (0, _css.fontFaceBlockToRule)(id, (0, _css.declarationsToBlock)(value));
    });
    this.keyframesRules = "";
    this.keyframesCache = new _cache.Cache(new _sequentialIdGenerator.default(opts.prefix), (cache, id, value) => {
      this.keyframesRules += (0, _css.keyframesBlockToRule)(id, (0, _css.keyframesToBlock)(value));
    });
  }

  renderStyle(style) {
    return (0, _injectStylePrefixed.default)(this.styleCache, style, "", "");
  }

  renderFontFace(fontFace) {
    const key = JSON.stringify(fontFace);
    return this.fontFaceCache.addValue(key, fontFace);
  }

  renderKeyframes(keyframes) {
    const key = JSON.stringify(keyframes);
    return this.keyframesCache.addValue(key, keyframes);
  }

  getStylesheets() {
    return [...(this.keyframesRules.length ? [{
      css: this.keyframesRules,
      attrs: {
        "data-hydrate": "keyframes"
      }
    }] : []), ...(this.fontFaceRules.length ? [{
      css: this.fontFaceRules,
      attrs: {
        "data-hydrate": "font-face"
      }
    }] : []), ...sheetify(this.styleRules, this.styleCache.getSortedCacheKeys())];
  }

  getStylesheetsHtml(className = "_styletron_hydrate_") {
    return generateHtmlString(this.getStylesheets(), className);
  }

  getCss() {
    return this.keyframesRules + this.fontFaceRules + stringify(this.styleRules, this.styleCache.getSortedCacheKeys());
  }

}

function generateHtmlString(sheets, className) {
  let html = "";

  for (let i = 0; i < sheets.length; i++) {
    const sheet = sheets[i];
    const {
      class: originalClassName,
      ...rest
    } = sheet.attrs;
    const attrs = {
      class: originalClassName ? `${className} ${originalClassName}` : className,
      ...rest
    };
    html += `<style${attrsToString(attrs)}>${sheet.css}</style>`;
  }

  return html;
}

function attrsToString(attrs) {
  let result = "";

  for (const attr in attrs) {
    const value = attrs[attr];

    if (value === true) {
      result += " " + attr;
    } else if (value !== false) {
      result += ` ${attr}="${value}"`;
    }
  }

  return result;
}

function stringify(styleRules, sortedCacheKeys) {
  let result = "";
  sortedCacheKeys.forEach(cacheKey => {
    const rules = styleRules[cacheKey];

    if (cacheKey !== "") {
      result += `@media ${cacheKey}{${rules}}`;
    } else {
      result += rules;
    }
  });
  return result;
}

function sheetify(styleRules, sortedCacheKeys) {
  if (sortedCacheKeys.length === 0) {
    return [{
      css: "",
      attrs: {}
    }];
  }

  const sheets = [];
  sortedCacheKeys.forEach(cacheKey => {
    // omit media (cacheKey) attribute if empty
    const attrs = cacheKey === "" ? {} : {
      media: cacheKey
    };
    sheets.push({
      css: styleRules[cacheKey],
      attrs
    });
  });
  return sheets;
}

var _default = StyletronServer;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHlsZXRyb25TZXJ2ZXIiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJzdHlsZVJ1bGVzIiwic3R5bGVDYWNoZSIsIk11bHRpQ2FjaGUiLCJTZXF1ZW50aWFsSURHZW5lcmF0b3IiLCJwcmVmaXgiLCJtZWRpYSIsImNhY2hlIiwiaWQiLCJ2YWx1ZSIsInBzZXVkbyIsImJsb2NrIiwia2V5Iiwic3R5bGVCbG9ja1RvUnVsZSIsImF0b21pY1NlbGVjdG9yIiwiZm9udEZhY2VSdWxlcyIsImZvbnRGYWNlQ2FjaGUiLCJDYWNoZSIsImZvbnRGYWNlQmxvY2tUb1J1bGUiLCJkZWNsYXJhdGlvbnNUb0Jsb2NrIiwia2V5ZnJhbWVzUnVsZXMiLCJrZXlmcmFtZXNDYWNoZSIsImtleWZyYW1lc0Jsb2NrVG9SdWxlIiwia2V5ZnJhbWVzVG9CbG9jayIsInJlbmRlclN0eWxlIiwic3R5bGUiLCJpbmplY3RTdHlsZVByZWZpeGVkIiwicmVuZGVyRm9udEZhY2UiLCJmb250RmFjZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRWYWx1ZSIsInJlbmRlcktleWZyYW1lcyIsImtleWZyYW1lcyIsImdldFN0eWxlc2hlZXRzIiwibGVuZ3RoIiwiY3NzIiwiYXR0cnMiLCJzaGVldGlmeSIsImdldFNvcnRlZENhY2hlS2V5cyIsImdldFN0eWxlc2hlZXRzSHRtbCIsImNsYXNzTmFtZSIsImdlbmVyYXRlSHRtbFN0cmluZyIsImdldENzcyIsInNoZWV0cyIsImh0bWwiLCJpIiwic2hlZXQiLCJjbGFzcyIsIm9yaWdpbmFsQ2xhc3NOYW1lIiwicmVzdCIsImF0dHJzVG9TdHJpbmciLCJyZXN1bHQiLCJhdHRyIiwic29ydGVkQ2FjaGVLZXlzIiwiZm9yRWFjaCIsImNhY2hlS2V5IiwicnVsZXMiLCJwdXNoIl0sInNvdXJjZXMiOlsic3JjL3NlcnZlci9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbnRpYWxJREdlbmVyYXRvciBmcm9tIFwiLi4vc2VxdWVudGlhbC1pZC1nZW5lcmF0b3JcIjtcblxuaW1wb3J0IHR5cGUge1N0YW5kYXJkRW5naW5lfSBmcm9tIFwic3R5bGV0cm9uLXN0YW5kYXJkXCI7XG5cbmltcG9ydCB7Q2FjaGUsIE11bHRpQ2FjaGV9IGZyb20gXCIuLi9jYWNoZVwiO1xuXG5pbXBvcnQgaW5qZWN0U3R5bGVQcmVmaXhlZCBmcm9tIFwiLi4vaW5qZWN0LXN0eWxlLXByZWZpeGVkXCI7XG5cbmltcG9ydCB0eXBlIHtcbiAgU3R5bGVPYmplY3QsXG4gIEZvbnRGYWNlT2JqZWN0LFxuICBLZXlmcmFtZXNPYmplY3QsXG59IGZyb20gXCJzdHlsZXRyb24tc3RhbmRhcmRcIjtcblxuaW1wb3J0IHtcbiAgc3R5bGVCbG9ja1RvUnVsZSxcbiAgYXRvbWljU2VsZWN0b3IsXG4gIGtleWZyYW1lc0Jsb2NrVG9SdWxlLFxuICBkZWNsYXJhdGlvbnNUb0Jsb2NrLFxuICBrZXlmcmFtZXNUb0Jsb2NrLFxuICBmb250RmFjZUJsb2NrVG9SdWxlLFxufSBmcm9tIFwiLi4vY3NzXCI7XG5cbmV4cG9ydCB0eXBlIGF0dHJzVCA9IHtcbiAgXCJkYXRhLWh5ZHJhdGVcIj86IFwia2V5ZnJhbWVzXCIgfCBcImZvbnQtZmFjZVwiO1xuICBtZWRpYT86IHN0cmluZztcbiAgY2xhc3M/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBzaGVldFQgPSB7XG4gIGNzczogc3RyaW5nO1xuICBhdHRyczogYXR0cnNUO1xufTtcblxudHlwZSBvcHRpb25zVCA9IHtcbiAgcHJlZml4Pzogc3RyaW5nO1xufTtcblxuY2xhc3MgU3R5bGV0cm9uU2VydmVyIGltcGxlbWVudHMgU3RhbmRhcmRFbmdpbmUge1xuICBzdHlsZUNhY2hlOiBNdWx0aUNhY2hlPHtcbiAgICBwc2V1ZG86IHN0cmluZztcbiAgICBibG9jazogc3RyaW5nO1xuICB9PjtcbiAga2V5ZnJhbWVzQ2FjaGU6IENhY2hlPEtleWZyYW1lc09iamVjdD47XG4gIGZvbnRGYWNlQ2FjaGU6IENhY2hlPEZvbnRGYWNlT2JqZWN0PjtcbiAgc3R5bGVSdWxlczoge1xuICAgIFt4OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIGtleWZyYW1lc1J1bGVzOiBzdHJpbmc7XG4gIGZvbnRGYWNlUnVsZXM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihvcHRzOiBvcHRpb25zVCA9IHt9KSB7XG4gICAgdGhpcy5zdHlsZVJ1bGVzID0ge1wiXCI6IFwiXCJ9O1xuICAgIHRoaXMuc3R5bGVDYWNoZSA9IG5ldyBNdWx0aUNhY2hlKFxuICAgICAgbmV3IFNlcXVlbnRpYWxJREdlbmVyYXRvcihvcHRzLnByZWZpeCksXG4gICAgICBtZWRpYSA9PiB7XG4gICAgICAgIHRoaXMuc3R5bGVSdWxlc1ttZWRpYV0gPSBcIlwiO1xuICAgICAgfSxcbiAgICAgIChjYWNoZSwgaWQsIHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IHtwc2V1ZG8sIGJsb2NrfSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnN0eWxlUnVsZXNbY2FjaGUua2V5XSArPSBzdHlsZUJsb2NrVG9SdWxlKFxuICAgICAgICAgIGF0b21pY1NlbGVjdG9yKGlkLCBwc2V1ZG8pLFxuICAgICAgICAgIGJsb2NrLFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy5mb250RmFjZVJ1bGVzID0gXCJcIjtcbiAgICB0aGlzLmZvbnRGYWNlQ2FjaGUgPSBuZXcgQ2FjaGUoXG4gICAgICBuZXcgU2VxdWVudGlhbElER2VuZXJhdG9yKG9wdHMucHJlZml4KSxcbiAgICAgIChjYWNoZSwgaWQsIHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMuZm9udEZhY2VSdWxlcyArPSBmb250RmFjZUJsb2NrVG9SdWxlKFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGRlY2xhcmF0aW9uc1RvQmxvY2sodmFsdWUpLFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy5rZXlmcmFtZXNSdWxlcyA9IFwiXCI7XG4gICAgdGhpcy5rZXlmcmFtZXNDYWNoZSA9IG5ldyBDYWNoZShcbiAgICAgIG5ldyBTZXF1ZW50aWFsSURHZW5lcmF0b3Iob3B0cy5wcmVmaXgpLFxuICAgICAgKGNhY2hlLCBpZCwgdmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5rZXlmcmFtZXNSdWxlcyArPSBrZXlmcmFtZXNCbG9ja1RvUnVsZShcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBrZXlmcmFtZXNUb0Jsb2NrKHZhbHVlKSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclN0eWxlKHN0eWxlOiBTdHlsZU9iamVjdCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGluamVjdFN0eWxlUHJlZml4ZWQodGhpcy5zdHlsZUNhY2hlLCBzdHlsZSwgXCJcIiwgXCJcIik7XG4gIH1cblxuICByZW5kZXJGb250RmFjZShmb250RmFjZTogRm9udEZhY2VPYmplY3QpOiBzdHJpbmcge1xuICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KGZvbnRGYWNlKTtcbiAgICByZXR1cm4gdGhpcy5mb250RmFjZUNhY2hlLmFkZFZhbHVlKGtleSwgZm9udEZhY2UpO1xuICB9XG5cbiAgcmVuZGVyS2V5ZnJhbWVzKGtleWZyYW1lczogS2V5ZnJhbWVzT2JqZWN0KTogc3RyaW5nIHtcbiAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShrZXlmcmFtZXMpO1xuICAgIHJldHVybiB0aGlzLmtleWZyYW1lc0NhY2hlLmFkZFZhbHVlKGtleSwga2V5ZnJhbWVzKTtcbiAgfVxuXG4gIGdldFN0eWxlc2hlZXRzKCk6IEFycmF5PHNoZWV0VD4ge1xuICAgIHJldHVybiBbXG4gICAgICAuLi4odGhpcy5rZXlmcmFtZXNSdWxlcy5sZW5ndGhcbiAgICAgICAgPyBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNzczogdGhpcy5rZXlmcmFtZXNSdWxlcyxcbiAgICAgICAgICAgICAgYXR0cnM6IHtcImRhdGEtaHlkcmF0ZVwiOiBcImtleWZyYW1lc1wifSxcbiAgICAgICAgICAgIH0gYXMgc2hlZXRULFxuICAgICAgICAgIF1cbiAgICAgICAgOiBbXSksXG4gICAgICAuLi4odGhpcy5mb250RmFjZVJ1bGVzLmxlbmd0aFxuICAgICAgICA/IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY3NzOiB0aGlzLmZvbnRGYWNlUnVsZXMsXG4gICAgICAgICAgICAgIGF0dHJzOiB7XCJkYXRhLWh5ZHJhdGVcIjogXCJmb250LWZhY2VcIn0sXG4gICAgICAgICAgICB9IGFzIHNoZWV0VCxcbiAgICAgICAgICBdXG4gICAgICAgIDogW10pLFxuICAgICAgLi4uc2hlZXRpZnkodGhpcy5zdHlsZVJ1bGVzLCB0aGlzLnN0eWxlQ2FjaGUuZ2V0U29ydGVkQ2FjaGVLZXlzKCkpLFxuICAgIF07XG4gIH1cblxuICBnZXRTdHlsZXNoZWV0c0h0bWwoY2xhc3NOYW1lOiBzdHJpbmcgPSBcIl9zdHlsZXRyb25faHlkcmF0ZV9cIikge1xuICAgIHJldHVybiBnZW5lcmF0ZUh0bWxTdHJpbmcodGhpcy5nZXRTdHlsZXNoZWV0cygpLCBjbGFzc05hbWUpO1xuICB9XG5cbiAgZ2V0Q3NzKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmtleWZyYW1lc1J1bGVzICtcbiAgICAgIHRoaXMuZm9udEZhY2VSdWxlcyArXG4gICAgICBzdHJpbmdpZnkodGhpcy5zdHlsZVJ1bGVzLCB0aGlzLnN0eWxlQ2FjaGUuZ2V0U29ydGVkQ2FjaGVLZXlzKCkpXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVIdG1sU3RyaW5nKHNoZWV0czogQXJyYXk8c2hlZXRUPiwgY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgbGV0IGh0bWwgPSBcIlwiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNoZWV0ID0gc2hlZXRzW2ldO1xuICAgIGNvbnN0IHtjbGFzczogb3JpZ2luYWxDbGFzc05hbWUsIC4uLnJlc3R9ID0gc2hlZXQuYXR0cnM7XG4gICAgY29uc3QgYXR0cnMgPSB7XG4gICAgICBjbGFzczogb3JpZ2luYWxDbGFzc05hbWVcbiAgICAgICAgPyBgJHtjbGFzc05hbWV9ICR7b3JpZ2luYWxDbGFzc05hbWV9YFxuICAgICAgICA6IGNsYXNzTmFtZSxcbiAgICAgIC4uLihyZXN0IGFzIGF0dHJzVCksXG4gICAgfTtcbiAgICBodG1sICs9IGA8c3R5bGUke2F0dHJzVG9TdHJpbmcoYXR0cnMpfT4ke3NoZWV0LmNzc308L3N0eWxlPmA7XG4gIH1cbiAgcmV0dXJuIGh0bWw7XG59XG5cbmZ1bmN0aW9uIGF0dHJzVG9TdHJpbmcoYXR0cnM6IGF0dHJzVCkge1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgZm9yIChjb25zdCBhdHRyIGluIGF0dHJzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBhdHRyc1thdHRyXTtcbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICAgIHJlc3VsdCArPSBcIiBcIiArIGF0dHI7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgIHJlc3VsdCArPSBgICR7YXR0cn09XCIke3ZhbHVlfVwiYDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KHN0eWxlUnVsZXMsIHNvcnRlZENhY2hlS2V5cykge1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgc29ydGVkQ2FjaGVLZXlzLmZvckVhY2goY2FjaGVLZXkgPT4ge1xuICAgIGNvbnN0IHJ1bGVzID0gc3R5bGVSdWxlc1tjYWNoZUtleV07XG4gICAgaWYgKGNhY2hlS2V5ICE9PSBcIlwiKSB7XG4gICAgICByZXN1bHQgKz0gYEBtZWRpYSAke2NhY2hlS2V5fXske3J1bGVzfX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gcnVsZXM7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gc2hlZXRpZnkoc3R5bGVSdWxlcywgc29ydGVkQ2FjaGVLZXlzKTogQXJyYXk8c2hlZXRUPiB7XG4gIGlmIChzb3J0ZWRDYWNoZUtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFt7Y3NzOiBcIlwiLCBhdHRyczoge319XTtcbiAgfVxuICBjb25zdCBzaGVldHMgPSBbXTtcbiAgc29ydGVkQ2FjaGVLZXlzLmZvckVhY2goY2FjaGVLZXkgPT4ge1xuICAgIC8vIG9taXQgbWVkaWEgKGNhY2hlS2V5KSBhdHRyaWJ1dGUgaWYgZW1wdHlcbiAgICBjb25zdCBhdHRycyA9IGNhY2hlS2V5ID09PSBcIlwiID8ge30gOiB7bWVkaWE6IGNhY2hlS2V5fTtcbiAgICBzaGVldHMucHVzaCh7Y3NzOiBzdHlsZVJ1bGVzW2NhY2hlS2V5XSwgYXR0cnN9KTtcbiAgfSk7XG4gIHJldHVybiBzaGVldHM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0eWxldHJvblNlcnZlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFJQTs7QUFFQTs7QUFRQTs7OztBQXdCQSxNQUFNQSxlQUFOLENBQWdEO0VBYTlDQyxXQUFXLENBQUNDLElBQWMsR0FBRyxFQUFsQixFQUFzQjtJQUMvQixLQUFLQyxVQUFMLEdBQWtCO01BQUMsSUFBSTtJQUFMLENBQWxCO0lBQ0EsS0FBS0MsVUFBTCxHQUFrQixJQUFJQyxpQkFBSixDQUNoQixJQUFJQyw4QkFBSixDQUEwQkosSUFBSSxDQUFDSyxNQUEvQixDQURnQixFQUVoQkMsS0FBSyxJQUFJO01BQ1AsS0FBS0wsVUFBTCxDQUFnQkssS0FBaEIsSUFBeUIsRUFBekI7SUFDRCxDQUplLEVBS2hCLENBQUNDLEtBQUQsRUFBUUMsRUFBUixFQUFZQyxLQUFaLEtBQXNCO01BQ3BCLE1BQU07UUFBQ0MsTUFBRDtRQUFTQztNQUFULElBQWtCRixLQUF4QjtNQUNBLEtBQUtSLFVBQUwsQ0FBZ0JNLEtBQUssQ0FBQ0ssR0FBdEIsS0FBOEIsSUFBQUMscUJBQUEsRUFDNUIsSUFBQUMsbUJBQUEsRUFBZU4sRUFBZixFQUFtQkUsTUFBbkIsQ0FENEIsRUFFNUJDLEtBRjRCLENBQTlCO0lBSUQsQ0FYZSxDQUFsQjtJQWNBLEtBQUtJLGFBQUwsR0FBcUIsRUFBckI7SUFDQSxLQUFLQyxhQUFMLEdBQXFCLElBQUlDLFlBQUosQ0FDbkIsSUFBSWIsOEJBQUosQ0FBMEJKLElBQUksQ0FBQ0ssTUFBL0IsQ0FEbUIsRUFFbkIsQ0FBQ0UsS0FBRCxFQUFRQyxFQUFSLEVBQVlDLEtBQVosS0FBc0I7TUFDcEIsS0FBS00sYUFBTCxJQUFzQixJQUFBRyx3QkFBQSxFQUNwQlYsRUFEb0IsRUFFcEIsSUFBQVcsd0JBQUEsRUFBb0JWLEtBQXBCLENBRm9CLENBQXRCO0lBSUQsQ0FQa0IsQ0FBckI7SUFVQSxLQUFLVyxjQUFMLEdBQXNCLEVBQXRCO0lBQ0EsS0FBS0MsY0FBTCxHQUFzQixJQUFJSixZQUFKLENBQ3BCLElBQUliLDhCQUFKLENBQTBCSixJQUFJLENBQUNLLE1BQS9CLENBRG9CLEVBRXBCLENBQUNFLEtBQUQsRUFBUUMsRUFBUixFQUFZQyxLQUFaLEtBQXNCO01BQ3BCLEtBQUtXLGNBQUwsSUFBdUIsSUFBQUUseUJBQUEsRUFDckJkLEVBRHFCLEVBRXJCLElBQUFlLHFCQUFBLEVBQWlCZCxLQUFqQixDQUZxQixDQUF2QjtJQUlELENBUG1CLENBQXRCO0VBU0Q7O0VBRURlLFdBQVcsQ0FBQ0MsS0FBRCxFQUE2QjtJQUN0QyxPQUFPLElBQUFDLDRCQUFBLEVBQW9CLEtBQUt4QixVQUF6QixFQUFxQ3VCLEtBQXJDLEVBQTRDLEVBQTVDLEVBQWdELEVBQWhELENBQVA7RUFDRDs7RUFFREUsY0FBYyxDQUFDQyxRQUFELEVBQW1DO0lBQy9DLE1BQU1oQixHQUFHLEdBQUdpQixJQUFJLENBQUNDLFNBQUwsQ0FBZUYsUUFBZixDQUFaO0lBQ0EsT0FBTyxLQUFLWixhQUFMLENBQW1CZSxRQUFuQixDQUE0Qm5CLEdBQTVCLEVBQWlDZ0IsUUFBakMsQ0FBUDtFQUNEOztFQUVESSxlQUFlLENBQUNDLFNBQUQsRUFBcUM7SUFDbEQsTUFBTXJCLEdBQUcsR0FBR2lCLElBQUksQ0FBQ0MsU0FBTCxDQUFlRyxTQUFmLENBQVo7SUFDQSxPQUFPLEtBQUtaLGNBQUwsQ0FBb0JVLFFBQXBCLENBQTZCbkIsR0FBN0IsRUFBa0NxQixTQUFsQyxDQUFQO0VBQ0Q7O0VBRURDLGNBQWMsR0FBa0I7SUFDOUIsT0FBTyxDQUNMLElBQUksS0FBS2QsY0FBTCxDQUFvQmUsTUFBcEIsR0FDQSxDQUNFO01BQ0VDLEdBQUcsRUFBRSxLQUFLaEIsY0FEWjtNQUVFaUIsS0FBSyxFQUFFO1FBQUMsZ0JBQWdCO01BQWpCO0lBRlQsQ0FERixDQURBLEdBT0EsRUFQSixDQURLLEVBU0wsSUFBSSxLQUFLdEIsYUFBTCxDQUFtQm9CLE1BQW5CLEdBQ0EsQ0FDRTtNQUNFQyxHQUFHLEVBQUUsS0FBS3JCLGFBRFo7TUFFRXNCLEtBQUssRUFBRTtRQUFDLGdCQUFnQjtNQUFqQjtJQUZULENBREYsQ0FEQSxHQU9BLEVBUEosQ0FUSyxFQWlCTCxHQUFHQyxRQUFRLENBQUMsS0FBS3JDLFVBQU4sRUFBa0IsS0FBS0MsVUFBTCxDQUFnQnFDLGtCQUFoQixFQUFsQixDQWpCTixDQUFQO0VBbUJEOztFQUVEQyxrQkFBa0IsQ0FBQ0MsU0FBaUIsR0FBRyxxQkFBckIsRUFBNEM7SUFDNUQsT0FBT0Msa0JBQWtCLENBQUMsS0FBS1IsY0FBTCxFQUFELEVBQXdCTyxTQUF4QixDQUF6QjtFQUNEOztFQUVERSxNQUFNLEdBQUc7SUFDUCxPQUNFLEtBQUt2QixjQUFMLEdBQ0EsS0FBS0wsYUFETCxHQUVBZSxTQUFTLENBQUMsS0FBSzdCLFVBQU4sRUFBa0IsS0FBS0MsVUFBTCxDQUFnQnFDLGtCQUFoQixFQUFsQixDQUhYO0VBS0Q7O0FBbEc2Qzs7QUFxR3pDLFNBQVNHLGtCQUFULENBQTRCRSxNQUE1QixFQUFtREgsU0FBbkQsRUFBc0U7RUFDM0UsSUFBSUksSUFBSSxHQUFHLEVBQVg7O0VBQ0EsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixNQUFNLENBQUNULE1BQTNCLEVBQW1DVyxDQUFDLEVBQXBDLEVBQXdDO0lBQ3RDLE1BQU1DLEtBQUssR0FBR0gsTUFBTSxDQUFDRSxDQUFELENBQXBCO0lBQ0EsTUFBTTtNQUFDRSxLQUFLLEVBQUVDLGlCQUFSO01BQTJCLEdBQUdDO0lBQTlCLElBQXNDSCxLQUFLLENBQUNWLEtBQWxEO0lBQ0EsTUFBTUEsS0FBSyxHQUFHO01BQ1pXLEtBQUssRUFBRUMsaUJBQWlCLEdBQ25CLEdBQUVSLFNBQVUsSUFBR1EsaUJBQWtCLEVBRGQsR0FFcEJSLFNBSFE7TUFJWixHQUFJUztJQUpRLENBQWQ7SUFNQUwsSUFBSSxJQUFLLFNBQVFNLGFBQWEsQ0FBQ2QsS0FBRCxDQUFRLElBQUdVLEtBQUssQ0FBQ1gsR0FBSSxVQUFuRDtFQUNEOztFQUNELE9BQU9TLElBQVA7QUFDRDs7QUFFRCxTQUFTTSxhQUFULENBQXVCZCxLQUF2QixFQUFzQztFQUNwQyxJQUFJZSxNQUFNLEdBQUcsRUFBYjs7RUFDQSxLQUFLLE1BQU1DLElBQVgsSUFBbUJoQixLQUFuQixFQUEwQjtJQUN4QixNQUFNNUIsS0FBSyxHQUFHNEIsS0FBSyxDQUFDZ0IsSUFBRCxDQUFuQjs7SUFDQSxJQUFJNUMsS0FBSyxLQUFLLElBQWQsRUFBb0I7TUFDbEIyQyxNQUFNLElBQUksTUFBTUMsSUFBaEI7SUFDRCxDQUZELE1BRU8sSUFBSTVDLEtBQUssS0FBSyxLQUFkLEVBQXFCO01BQzFCMkMsTUFBTSxJQUFLLElBQUdDLElBQUssS0FBSTVDLEtBQU0sR0FBN0I7SUFDRDtFQUNGOztFQUNELE9BQU8yQyxNQUFQO0FBQ0Q7O0FBRUQsU0FBU3RCLFNBQVQsQ0FBbUI3QixVQUFuQixFQUErQnFELGVBQS9CLEVBQWdEO0VBQzlDLElBQUlGLE1BQU0sR0FBRyxFQUFiO0VBQ0FFLGVBQWUsQ0FBQ0MsT0FBaEIsQ0FBd0JDLFFBQVEsSUFBSTtJQUNsQyxNQUFNQyxLQUFLLEdBQUd4RCxVQUFVLENBQUN1RCxRQUFELENBQXhCOztJQUNBLElBQUlBLFFBQVEsS0FBSyxFQUFqQixFQUFxQjtNQUNuQkosTUFBTSxJQUFLLFVBQVNJLFFBQVMsSUFBR0MsS0FBTSxHQUF0QztJQUNELENBRkQsTUFFTztNQUNMTCxNQUFNLElBQUlLLEtBQVY7SUFDRDtFQUNGLENBUEQ7RUFRQSxPQUFPTCxNQUFQO0FBQ0Q7O0FBRUQsU0FBU2QsUUFBVCxDQUFrQnJDLFVBQWxCLEVBQThCcUQsZUFBOUIsRUFBOEQ7RUFDNUQsSUFBSUEsZUFBZSxDQUFDbkIsTUFBaEIsS0FBMkIsQ0FBL0IsRUFBa0M7SUFDaEMsT0FBTyxDQUFDO01BQUNDLEdBQUcsRUFBRSxFQUFOO01BQVVDLEtBQUssRUFBRTtJQUFqQixDQUFELENBQVA7RUFDRDs7RUFDRCxNQUFNTyxNQUFNLEdBQUcsRUFBZjtFQUNBVSxlQUFlLENBQUNDLE9BQWhCLENBQXdCQyxRQUFRLElBQUk7SUFDbEM7SUFDQSxNQUFNbkIsS0FBSyxHQUFHbUIsUUFBUSxLQUFLLEVBQWIsR0FBa0IsRUFBbEIsR0FBdUI7TUFBQ2xELEtBQUssRUFBRWtEO0lBQVIsQ0FBckM7SUFDQVosTUFBTSxDQUFDYyxJQUFQLENBQVk7TUFBQ3RCLEdBQUcsRUFBRW5DLFVBQVUsQ0FBQ3VELFFBQUQsQ0FBaEI7TUFBNEJuQjtJQUE1QixDQUFaO0VBQ0QsQ0FKRDtFQUtBLE9BQU9PLE1BQVA7QUFDRDs7ZUFFYzlDLGUifQ==