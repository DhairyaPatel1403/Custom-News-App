/* eslint-env browser */
import StyletronServer from "../../server/server";
import StyletronClient from "../client";
const reduce = Array.prototype.reduce;
const map = Array.prototype.map;
test("container config", () => {
  const instance = new StyletronClient();
  expect(instance.container).toBe(document.head);
});
test("automatic stylesheet insertion", () => {
  const container = document.createElement("div");
  document.body && document.body.appendChild(container);
  const instance = new StyletronClient({
    container
  });
  expect(instance.container).toStrictEqual(container); // lazy instantiation

  expect(document.styleSheets.length).toBe(0);
  expect(instance.renderStyle({
    color: "purple"
  })).toBe("ae");
  expect(document.styleSheets.length).toBe(1);
  instance.container.remove();
  expect(document.styleSheets.length).toBe(0);
});
test("rendering", () => {
  const container = document.createElement("div");
  document.body && document.body.appendChild(container);
  const instance = new StyletronClient({
    container
  });
  expect(instance.renderStyle({
    color: "purple"
  })).toBe("ae");
  expect(sheetsToRules(document.styleSheets)).toEqual([{
    media: "",
    rules: [".ae {color: purple;}"]
  }]); // expect(
  //   instance.renderStyle({
  //     "@media (min-width: 800px)": {color: "purple"},
  //   }),
  // ).toBe("af");
  // expect(sheetsToRules(document.styleSheets)).toEqual([
  //   {media: "", rules: [".ae {color: purple;}"]},
  //   {media: "(min-width: 800px)", rules: [".af {color: purple;}"]},
  // ]);

  instance.renderStyle({
    userSelect: "none"
  });
  expect(sheetsToRules(document.styleSheets)).toEqual([{
    media: "",
    rules: [".ae {color: purple;}", ".af {-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}"]
  } // {media: "(min-width: 800px)", rules: [".af {color: purple;}"]},
  ]);
  instance.renderStyle({
    display: "flex"
  });
  expect(sheetsToRules(document.styleSheets)).toEqual([{
    media: "",
    rules: [".ae {color: purple;}", ".af {-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}", ".ag {display: flex;}"]
  } // {media: "(min-width: 800px)", rules: [".af {color: purple;}"]},
  ]); // instance.renderStyle({
  //   "@media (min-width: 600px)": {
  //     color: "red",
  //   },
  // });
  // expect(sheetsToRules(document.styleSheets)).toEqual([
  //   {
  //     media: "",
  //     rules: [
  //       ".ae {color: purple;}",
  //       ".ag {user-select: none;}",
  //       ".ah {display: flex;}",
  //     ],
  //   },
  // {media: "(min-width: 600px)", rules: [".ai { color: red; }"]},
  // {media: "(min-width: 800px)", rules: [".af { color: purple; }"]},
  // ]);

  instance.container.remove();
});
test("prefix", () => {
  const container = document.createElement("div");
  document.body && document.body.appendChild(container);
  const instance = new StyletronClient({
    container,
    prefix: "foo_"
  });
  expect(instance.renderStyle({
    color: "purple"
  })).toBe("foo_ae");
  expect(instance.renderFontFace({
    src: "url(blah)"
  })).toBe("foo_ae");
  expect(instance.renderKeyframes({
    from: {
      color: "red"
    },
    to: {
      color: "blue"
    }
  })).toBe("foo_ae");
  expect(sheetsToRules(document.styleSheets)).toEqual([{
    media: "",
    rules: [".foo_ae {color: purple;}", `@font-face {font-family: foo_ae; src: url(blah);}`, "@keyframes foo_ae { \n  from {color: red;} \n  to {color: blue;} \n}"]
  }]);
  instance.container.remove();
});
test("hydration", () => {
  const {
    getSheets,
    cleanup,
    container
  } = setup(); // SSR

  const server = new StyletronServer();
  injectFixtureStyles(server);
  container.innerHTML = server.getStylesheetsHtml(); // Hydration

  const instance = new StyletronClient({
    hydrate: getSheets()
  });
  const beforeSheetLength = document.styleSheets.length;
  const beforeRules = elementsToRules(getSheets());
  injectFixtureStyles(instance);
  const afterSheetLength = document.styleSheets.length;
  const afterRules = elementsToRules(getSheets());
  expect(beforeSheetLength).toBe(afterSheetLength);
  expect(afterRules).toEqual(beforeRules);
  cleanup();
}); // test("sort client media queries", t => {
//   const {cleanup, container} = setup();
//   const styletron = new StyletronClient({container});
//   styletron.renderStyle({
//     "@media (min-width: 700px)": {
//       color: "pink",
//     },
//   });
//   expect(sheetsToRules(document.styleSheets)).toEqual([
//     {media: "", rules: []},
//     {media: "(min-width: 700px)", rules: [".ae { color: pink; }"]},
//   ]);
//   cleanup();
// });
// test("sort a new media query after hydration", () => {
//   const {getSheets, cleanup, container} = setup();
//   // SSR
//   const server = new StyletronServer();
//   injectFixtureStyles(server);
//   container.innerHTML = server.getStylesheetsHtml();
//   //Hydration
//   const instance = new StyletronClient({
//     hydrate: getSheets(),
//     container,
//   });
//   //render a client-only and unique media query (mid position)
//   instance.renderStyle({
//     "@media (min-width: 700px)": {
//       color: "pink",
//     },
//   });
//   //render a client-only and unique media query (end position)
//   instance.renderStyle({
//     "@media (min-width: 1000px)": {
//       color: "black",
//     },
//   });
//   expect(sheetsToRules(document.styleSheets)).toEqual([
//     {
//       media: "",
//       rules: [
//         "@keyframes ae { \n  0% { color: red; }\n  100% { color: blue; }\n}",
//       ],
//     },
//     {media: "", rules: ['@font-face { font-family: ae; src: url("blah"); }']},
//     {
//       media: "",
//       rules: [
//         ".ae { color: red; }",
//         ".af { color: green; }",
//         ".aj:hover { display: none; }",
//         ".ak { user-select: none; }",
//         ".al { display: flex; }",
//       ],
//     },
//     {media: "(min-width: 600px)", rules: [".ah { color: red; }"]},
//     {media: "(min-width: 700px)", rules: [".am { color: pink; }"]},
//     {
//       media: "(min-width: 800px)",
//       rules: [".ag { color: green; }", ".ai:hover { color: green; }"],
//     },
//     {media: "(min-width: 1000px)", rules: [".an { color: black; }"]},
//   ]);
//   cleanup();
// });

function injectFixtureStyles(styletron) {
  styletron.renderStyle({
    color: "red"
  });
  styletron.renderStyle({
    color: "green"
  });
  styletron.renderStyle({
    "@media (min-width: 800px)": {
      color: "green"
    }
  });
  styletron.renderStyle({
    "@media (min-width: 600px)": {
      color: "red"
    }
  });
  styletron.renderStyle({
    "@media (min-width: 800px)": {
      ":hover": {
        color: "green"
      }
    }
  });
  styletron.renderStyle({
    ":hover": {
      display: "none"
    }
  });
  styletron.renderStyle({
    userSelect: "none"
  });
  styletron.renderStyle({
    display: "flex"
  });
  styletron.renderFontFace({
    src: "url(blah)"
  });
  styletron.renderKeyframes({
    from: {
      color: "red"
    },
    to: {
      color: "blue"
    }
  });
}

function setup() {
  const container = document.createElement("div");

  if (document.body === void 0) {
    throw new Error("no body");
  }

  if (document.body === null) {
    throw new Error("body is null");
  }

  document.body.appendChild(container);
  return {
    container,

    getSheets() {
      return container.children;
    },

    cleanup() {
      container.remove();
    }

  };
}

function sheetToRules(sheet) {
  return reduce.call(sheet.cssRules, (acc, rule) => {
    return [...acc, rule.cssText];
  }, []);
}

function elementsToRules(elements) {
  return sheetsToRules(map.call(elements, el => el.sheet));
}

function sheetsToRules(sheets) {
  return reduce.call(sheets, (acc, sheet) => {
    return [...acc, // JSDOM does not support reading the media property... will likely need to
    // figure out another way to unit test this feature. Commented out instances
    // where we assert against this field. Will need to follow up after migration.
    // {media: sheet.media.mediaText, rules: sheetToRules(sheet)},
    {
      media: "",
      rules: sheetToRules(sheet)
    }];
  }, []);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHlsZXRyb25TZXJ2ZXIiLCJTdHlsZXRyb25DbGllbnQiLCJyZWR1Y2UiLCJBcnJheSIsInByb3RvdHlwZSIsIm1hcCIsInRlc3QiLCJpbnN0YW5jZSIsImV4cGVjdCIsImNvbnRhaW5lciIsInRvQmUiLCJkb2N1bWVudCIsImhlYWQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwidG9TdHJpY3RFcXVhbCIsInN0eWxlU2hlZXRzIiwibGVuZ3RoIiwicmVuZGVyU3R5bGUiLCJjb2xvciIsInJlbW92ZSIsInNoZWV0c1RvUnVsZXMiLCJ0b0VxdWFsIiwibWVkaWEiLCJydWxlcyIsInVzZXJTZWxlY3QiLCJkaXNwbGF5IiwicHJlZml4IiwicmVuZGVyRm9udEZhY2UiLCJzcmMiLCJyZW5kZXJLZXlmcmFtZXMiLCJmcm9tIiwidG8iLCJnZXRTaGVldHMiLCJjbGVhbnVwIiwic2V0dXAiLCJzZXJ2ZXIiLCJpbmplY3RGaXh0dXJlU3R5bGVzIiwiaW5uZXJIVE1MIiwiZ2V0U3R5bGVzaGVldHNIdG1sIiwiaHlkcmF0ZSIsImJlZm9yZVNoZWV0TGVuZ3RoIiwiYmVmb3JlUnVsZXMiLCJlbGVtZW50c1RvUnVsZXMiLCJhZnRlclNoZWV0TGVuZ3RoIiwiYWZ0ZXJSdWxlcyIsInN0eWxldHJvbiIsIkVycm9yIiwiY2hpbGRyZW4iLCJzaGVldFRvUnVsZXMiLCJzaGVldCIsImNhbGwiLCJjc3NSdWxlcyIsImFjYyIsInJ1bGUiLCJjc3NUZXh0IiwiZWxlbWVudHMiLCJlbCIsInNoZWV0cyJdLCJzb3VyY2VzIjpbInNyYy9jbGllbnQvX190ZXN0c19fL2NsaWVudC5icm93c2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG5pbXBvcnQgU3R5bGV0cm9uU2VydmVyIGZyb20gXCIuLi8uLi9zZXJ2ZXIvc2VydmVyXCI7XG5pbXBvcnQgU3R5bGV0cm9uQ2xpZW50IGZyb20gXCIuLi9jbGllbnRcIjtcbmNvbnN0IHJlZHVjZSA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2U7XG5jb25zdCBtYXAgPSBBcnJheS5wcm90b3R5cGUubWFwO1xuXG50ZXN0KFwiY29udGFpbmVyIGNvbmZpZ1wiLCAoKSA9PiB7XG4gIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCgpO1xuICBleHBlY3QoaW5zdGFuY2UuY29udGFpbmVyKS50b0JlKGRvY3VtZW50LmhlYWQpO1xufSk7XG5cbnRlc3QoXCJhdXRvbWF0aWMgc3R5bGVzaGVldCBpbnNlcnRpb25cIiwgKCkgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgY29uc3QgaW5zdGFuY2UgPSBuZXcgU3R5bGV0cm9uQ2xpZW50KHtjb250YWluZXJ9KTtcbiAgZXhwZWN0KGluc3RhbmNlLmNvbnRhaW5lcikudG9TdHJpY3RFcXVhbChjb250YWluZXIpO1xuICAvLyBsYXp5IGluc3RhbnRpYXRpb25cbiAgZXhwZWN0KGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCkudG9CZSgwKTtcbiAgZXhwZWN0KGluc3RhbmNlLnJlbmRlclN0eWxlKHtjb2xvcjogXCJwdXJwbGVcIn0pKS50b0JlKFwiYWVcIik7XG4gIGV4cGVjdChkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGgpLnRvQmUoMSk7XG4gIGluc3RhbmNlLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgZXhwZWN0KGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCkudG9CZSgwKTtcbn0pO1xuXG50ZXN0KFwicmVuZGVyaW5nXCIsICgpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCh7Y29udGFpbmVyfSk7XG5cbiAgZXhwZWN0KGluc3RhbmNlLnJlbmRlclN0eWxlKHtjb2xvcjogXCJwdXJwbGVcIn0pKS50b0JlKFwiYWVcIik7XG4gIGV4cGVjdChzaGVldHNUb1J1bGVzKGRvY3VtZW50LnN0eWxlU2hlZXRzKSkudG9FcXVhbChbXG4gICAge21lZGlhOiBcIlwiLCBydWxlczogW1wiLmFlIHtjb2xvcjogcHVycGxlO31cIl19LFxuICBdKTtcblxuICAvLyBleHBlY3QoXG4gIC8vICAgaW5zdGFuY2UucmVuZGVyU3R5bGUoe1xuICAvLyAgICAgXCJAbWVkaWEgKG1pbi13aWR0aDogODAwcHgpXCI6IHtjb2xvcjogXCJwdXJwbGVcIn0sXG4gIC8vICAgfSksXG4gIC8vICkudG9CZShcImFmXCIpO1xuICAvLyBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAvLyAgIHttZWRpYTogXCJcIiwgcnVsZXM6IFtcIi5hZSB7Y29sb3I6IHB1cnBsZTt9XCJdfSxcbiAgLy8gICB7bWVkaWE6IFwiKG1pbi13aWR0aDogODAwcHgpXCIsIHJ1bGVzOiBbXCIuYWYge2NvbG9yOiBwdXJwbGU7fVwiXX0sXG4gIC8vIF0pO1xuXG4gIGluc3RhbmNlLnJlbmRlclN0eWxlKHt1c2VyU2VsZWN0OiBcIm5vbmVcIn0pO1xuICBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAgIHtcbiAgICAgIG1lZGlhOiBcIlwiLFxuICAgICAgcnVsZXM6IFtcbiAgICAgICAgXCIuYWUge2NvbG9yOiBwdXJwbGU7fVwiLFxuICAgICAgICBcIi5hZiB7LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLW1zLXVzZXItc2VsZWN0OiBub25lOyB1c2VyLXNlbGVjdDogbm9uZTt9XCIsXG4gICAgICBdLFxuICAgIH0sXG4gICAgLy8ge21lZGlhOiBcIihtaW4td2lkdGg6IDgwMHB4KVwiLCBydWxlczogW1wiLmFmIHtjb2xvcjogcHVycGxlO31cIl19LFxuICBdKTtcblxuICBpbnN0YW5jZS5yZW5kZXJTdHlsZSh7ZGlzcGxheTogXCJmbGV4XCJ9KTtcbiAgZXhwZWN0KHNoZWV0c1RvUnVsZXMoZG9jdW1lbnQuc3R5bGVTaGVldHMpKS50b0VxdWFsKFtcbiAgICB7XG4gICAgICBtZWRpYTogXCJcIixcbiAgICAgIHJ1bGVzOiBbXG4gICAgICAgIFwiLmFlIHtjb2xvcjogcHVycGxlO31cIixcbiAgICAgICAgXCIuYWYgey13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC1tcy11c2VyLXNlbGVjdDogbm9uZTsgdXNlci1zZWxlY3Q6IG5vbmU7fVwiLFxuICAgICAgICBcIi5hZyB7ZGlzcGxheTogZmxleDt9XCIsXG4gICAgICBdLFxuICAgIH0sXG4gICAgLy8ge21lZGlhOiBcIihtaW4td2lkdGg6IDgwMHB4KVwiLCBydWxlczogW1wiLmFmIHtjb2xvcjogcHVycGxlO31cIl19LFxuICBdKTtcblxuICAvLyBpbnN0YW5jZS5yZW5kZXJTdHlsZSh7XG4gIC8vICAgXCJAbWVkaWEgKG1pbi13aWR0aDogNjAwcHgpXCI6IHtcbiAgLy8gICAgIGNvbG9yOiBcInJlZFwiLFxuICAvLyAgIH0sXG4gIC8vIH0pO1xuICAvLyBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAvLyAgIHtcbiAgLy8gICAgIG1lZGlhOiBcIlwiLFxuICAvLyAgICAgcnVsZXM6IFtcbiAgLy8gICAgICAgXCIuYWUge2NvbG9yOiBwdXJwbGU7fVwiLFxuICAvLyAgICAgICBcIi5hZyB7dXNlci1zZWxlY3Q6IG5vbmU7fVwiLFxuICAvLyAgICAgICBcIi5haCB7ZGlzcGxheTogZmxleDt9XCIsXG4gIC8vICAgICBdLFxuICAvLyAgIH0sXG4gIC8vIHttZWRpYTogXCIobWluLXdpZHRoOiA2MDBweClcIiwgcnVsZXM6IFtcIi5haSB7IGNvbG9yOiByZWQ7IH1cIl19LFxuICAvLyB7bWVkaWE6IFwiKG1pbi13aWR0aDogODAwcHgpXCIsIHJ1bGVzOiBbXCIuYWYgeyBjb2xvcjogcHVycGxlOyB9XCJdfSxcbiAgLy8gXSk7XG4gIGluc3RhbmNlLmNvbnRhaW5lci5yZW1vdmUoKTtcbn0pO1xuXG50ZXN0KFwicHJlZml4XCIsICgpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCh7Y29udGFpbmVyLCBwcmVmaXg6IFwiZm9vX1wifSk7XG5cbiAgZXhwZWN0KGluc3RhbmNlLnJlbmRlclN0eWxlKHtjb2xvcjogXCJwdXJwbGVcIn0pKS50b0JlKFwiZm9vX2FlXCIpO1xuICBleHBlY3QoaW5zdGFuY2UucmVuZGVyRm9udEZhY2Uoe3NyYzogXCJ1cmwoYmxhaClcIn0pKS50b0JlKFwiZm9vX2FlXCIpO1xuICBleHBlY3QoXG4gICAgaW5zdGFuY2UucmVuZGVyS2V5ZnJhbWVzKHtmcm9tOiB7Y29sb3I6IFwicmVkXCJ9LCB0bzoge2NvbG9yOiBcImJsdWVcIn19KSxcbiAgKS50b0JlKFwiZm9vX2FlXCIpO1xuICBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAgIHtcbiAgICAgIG1lZGlhOiBcIlwiLFxuICAgICAgcnVsZXM6IFtcbiAgICAgICAgXCIuZm9vX2FlIHtjb2xvcjogcHVycGxlO31cIixcbiAgICAgICAgYEBmb250LWZhY2Uge2ZvbnQtZmFtaWx5OiBmb29fYWU7IHNyYzogdXJsKGJsYWgpO31gLFxuICAgICAgICBcIkBrZXlmcmFtZXMgZm9vX2FlIHsgXFxuICBmcm9tIHtjb2xvcjogcmVkO30gXFxuICB0byB7Y29sb3I6IGJsdWU7fSBcXG59XCIsXG4gICAgICBdLFxuICAgIH0sXG4gIF0pO1xuXG4gIGluc3RhbmNlLmNvbnRhaW5lci5yZW1vdmUoKTtcbn0pO1xuXG50ZXN0KFwiaHlkcmF0aW9uXCIsICgpID0+IHtcbiAgY29uc3Qge2dldFNoZWV0cywgY2xlYW51cCwgY29udGFpbmVyfSA9IHNldHVwKCk7XG5cbiAgLy8gU1NSXG4gIGNvbnN0IHNlcnZlciA9IG5ldyBTdHlsZXRyb25TZXJ2ZXIoKTtcbiAgaW5qZWN0Rml4dHVyZVN0eWxlcyhzZXJ2ZXIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gc2VydmVyLmdldFN0eWxlc2hlZXRzSHRtbCgpO1xuXG4gIC8vIEh5ZHJhdGlvblxuICBjb25zdCBpbnN0YW5jZSA9IG5ldyBTdHlsZXRyb25DbGllbnQoe1xuICAgIGh5ZHJhdGU6IGdldFNoZWV0cygpLFxuICB9KTtcblxuICBjb25zdCBiZWZvcmVTaGVldExlbmd0aCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDtcbiAgY29uc3QgYmVmb3JlUnVsZXMgPSBlbGVtZW50c1RvUnVsZXMoZ2V0U2hlZXRzKCkpO1xuICBpbmplY3RGaXh0dXJlU3R5bGVzKGluc3RhbmNlKTtcbiAgY29uc3QgYWZ0ZXJTaGVldExlbmd0aCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDtcbiAgY29uc3QgYWZ0ZXJSdWxlcyA9IGVsZW1lbnRzVG9SdWxlcyhnZXRTaGVldHMoKSk7XG4gIGV4cGVjdChiZWZvcmVTaGVldExlbmd0aCkudG9CZShhZnRlclNoZWV0TGVuZ3RoKTtcbiAgZXhwZWN0KGFmdGVyUnVsZXMpLnRvRXF1YWwoYmVmb3JlUnVsZXMpO1xuICBjbGVhbnVwKCk7XG59KTtcblxuLy8gdGVzdChcInNvcnQgY2xpZW50IG1lZGlhIHF1ZXJpZXNcIiwgdCA9PiB7XG4vLyAgIGNvbnN0IHtjbGVhbnVwLCBjb250YWluZXJ9ID0gc2V0dXAoKTtcblxuLy8gICBjb25zdCBzdHlsZXRyb24gPSBuZXcgU3R5bGV0cm9uQ2xpZW50KHtjb250YWluZXJ9KTtcblxuLy8gICBzdHlsZXRyb24ucmVuZGVyU3R5bGUoe1xuLy8gICAgIFwiQG1lZGlhIChtaW4td2lkdGg6IDcwMHB4KVwiOiB7XG4vLyAgICAgICBjb2xvcjogXCJwaW5rXCIsXG4vLyAgICAgfSxcbi8vICAgfSk7XG5cbi8vICAgZXhwZWN0KHNoZWV0c1RvUnVsZXMoZG9jdW1lbnQuc3R5bGVTaGVldHMpKS50b0VxdWFsKFtcbi8vICAgICB7bWVkaWE6IFwiXCIsIHJ1bGVzOiBbXX0sXG4vLyAgICAge21lZGlhOiBcIihtaW4td2lkdGg6IDcwMHB4KVwiLCBydWxlczogW1wiLmFlIHsgY29sb3I6IHBpbms7IH1cIl19LFxuLy8gICBdKTtcblxuLy8gICBjbGVhbnVwKCk7XG4vLyB9KTtcblxuLy8gdGVzdChcInNvcnQgYSBuZXcgbWVkaWEgcXVlcnkgYWZ0ZXIgaHlkcmF0aW9uXCIsICgpID0+IHtcbi8vICAgY29uc3Qge2dldFNoZWV0cywgY2xlYW51cCwgY29udGFpbmVyfSA9IHNldHVwKCk7XG5cbi8vICAgLy8gU1NSXG4vLyAgIGNvbnN0IHNlcnZlciA9IG5ldyBTdHlsZXRyb25TZXJ2ZXIoKTtcbi8vICAgaW5qZWN0Rml4dHVyZVN0eWxlcyhzZXJ2ZXIpO1xuLy8gICBjb250YWluZXIuaW5uZXJIVE1MID0gc2VydmVyLmdldFN0eWxlc2hlZXRzSHRtbCgpO1xuXG4vLyAgIC8vSHlkcmF0aW9uXG4vLyAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCh7XG4vLyAgICAgaHlkcmF0ZTogZ2V0U2hlZXRzKCksXG4vLyAgICAgY29udGFpbmVyLFxuLy8gICB9KTtcblxuLy8gICAvL3JlbmRlciBhIGNsaWVudC1vbmx5IGFuZCB1bmlxdWUgbWVkaWEgcXVlcnkgKG1pZCBwb3NpdGlvbilcbi8vICAgaW5zdGFuY2UucmVuZGVyU3R5bGUoe1xuLy8gICAgIFwiQG1lZGlhIChtaW4td2lkdGg6IDcwMHB4KVwiOiB7XG4vLyAgICAgICBjb2xvcjogXCJwaW5rXCIsXG4vLyAgICAgfSxcbi8vICAgfSk7XG5cbi8vICAgLy9yZW5kZXIgYSBjbGllbnQtb25seSBhbmQgdW5pcXVlIG1lZGlhIHF1ZXJ5IChlbmQgcG9zaXRpb24pXG4vLyAgIGluc3RhbmNlLnJlbmRlclN0eWxlKHtcbi8vICAgICBcIkBtZWRpYSAobWluLXdpZHRoOiAxMDAwcHgpXCI6IHtcbi8vICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4vLyAgICAgfSxcbi8vICAgfSk7XG5cbi8vICAgZXhwZWN0KHNoZWV0c1RvUnVsZXMoZG9jdW1lbnQuc3R5bGVTaGVldHMpKS50b0VxdWFsKFtcbi8vICAgICB7XG4vLyAgICAgICBtZWRpYTogXCJcIixcbi8vICAgICAgIHJ1bGVzOiBbXG4vLyAgICAgICAgIFwiQGtleWZyYW1lcyBhZSB7IFxcbiAgMCUgeyBjb2xvcjogcmVkOyB9XFxuICAxMDAlIHsgY29sb3I6IGJsdWU7IH1cXG59XCIsXG4vLyAgICAgICBdLFxuLy8gICAgIH0sXG4vLyAgICAge21lZGlhOiBcIlwiLCBydWxlczogWydAZm9udC1mYWNlIHsgZm9udC1mYW1pbHk6IGFlOyBzcmM6IHVybChcImJsYWhcIik7IH0nXX0sXG4vLyAgICAge1xuLy8gICAgICAgbWVkaWE6IFwiXCIsXG4vLyAgICAgICBydWxlczogW1xuLy8gICAgICAgICBcIi5hZSB7IGNvbG9yOiByZWQ7IH1cIixcbi8vICAgICAgICAgXCIuYWYgeyBjb2xvcjogZ3JlZW47IH1cIixcbi8vICAgICAgICAgXCIuYWo6aG92ZXIgeyBkaXNwbGF5OiBub25lOyB9XCIsXG4vLyAgICAgICAgIFwiLmFrIHsgdXNlci1zZWxlY3Q6IG5vbmU7IH1cIixcbi8vICAgICAgICAgXCIuYWwgeyBkaXNwbGF5OiBmbGV4OyB9XCIsXG4vLyAgICAgICBdLFxuLy8gICAgIH0sXG4vLyAgICAge21lZGlhOiBcIihtaW4td2lkdGg6IDYwMHB4KVwiLCBydWxlczogW1wiLmFoIHsgY29sb3I6IHJlZDsgfVwiXX0sXG4vLyAgICAge21lZGlhOiBcIihtaW4td2lkdGg6IDcwMHB4KVwiLCBydWxlczogW1wiLmFtIHsgY29sb3I6IHBpbms7IH1cIl19LFxuLy8gICAgIHtcbi8vICAgICAgIG1lZGlhOiBcIihtaW4td2lkdGg6IDgwMHB4KVwiLFxuLy8gICAgICAgcnVsZXM6IFtcIi5hZyB7IGNvbG9yOiBncmVlbjsgfVwiLCBcIi5haTpob3ZlciB7IGNvbG9yOiBncmVlbjsgfVwiXSxcbi8vICAgICB9LFxuLy8gICAgIHttZWRpYTogXCIobWluLXdpZHRoOiAxMDAwcHgpXCIsIHJ1bGVzOiBbXCIuYW4geyBjb2xvcjogYmxhY2s7IH1cIl19LFxuLy8gICBdKTtcblxuLy8gICBjbGVhbnVwKCk7XG4vLyB9KTtcblxuZnVuY3Rpb24gaW5qZWN0Rml4dHVyZVN0eWxlcyhzdHlsZXRyb24pIHtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtjb2xvcjogXCJyZWRcIn0pO1xuICBzdHlsZXRyb24ucmVuZGVyU3R5bGUoe2NvbG9yOiBcImdyZWVuXCJ9KTtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtcbiAgICBcIkBtZWRpYSAobWluLXdpZHRoOiA4MDBweClcIjoge1xuICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICB9LFxuICB9KTtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtcbiAgICBcIkBtZWRpYSAobWluLXdpZHRoOiA2MDBweClcIjoge1xuICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgXCJAbWVkaWEgKG1pbi13aWR0aDogODAwcHgpXCI6IHtcbiAgICAgIFwiOmhvdmVyXCI6IHtcbiAgICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgXCI6aG92ZXJcIjoge1xuICAgICAgZGlzcGxheTogXCJub25lXCIsXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgdXNlclNlbGVjdDogXCJub25lXCIsXG4gIH0pO1xuICBzdHlsZXRyb24ucmVuZGVyU3R5bGUoe1xuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICB9KTtcbiAgc3R5bGV0cm9uLnJlbmRlckZvbnRGYWNlKHtzcmM6IFwidXJsKGJsYWgpXCJ9KTtcbiAgc3R5bGV0cm9uLnJlbmRlcktleWZyYW1lcyh7ZnJvbToge2NvbG9yOiBcInJlZFwifSwgdG86IHtjb2xvcjogXCJibHVlXCJ9fSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwKCkge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBpZiAoZG9jdW1lbnQuYm9keSA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm8gYm9keVwiKTtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5ib2R5ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYm9keSBpcyBudWxsXCIpO1xuICB9XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICByZXR1cm4ge1xuICAgIGNvbnRhaW5lcixcbiAgICBnZXRTaGVldHMoKSB7XG4gICAgICByZXR1cm4gY29udGFpbmVyLmNoaWxkcmVuIGFzIEhUTUxDb2xsZWN0aW9uT2Y8SFRNTFN0eWxlRWxlbWVudD47XG4gICAgfSxcbiAgICBjbGVhbnVwKCkge1xuICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNoZWV0VG9SdWxlcyhzaGVldCkge1xuICByZXR1cm4gcmVkdWNlLmNhbGwoXG4gICAgc2hlZXQuY3NzUnVsZXMsXG4gICAgKGFjYywgcnVsZSkgPT4ge1xuICAgICAgcmV0dXJuIFsuLi5hY2MsIHJ1bGUuY3NzVGV4dF07XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudHNUb1J1bGVzKGVsZW1lbnRzKSB7XG4gIHJldHVybiBzaGVldHNUb1J1bGVzKG1hcC5jYWxsKGVsZW1lbnRzLCBlbCA9PiBlbC5zaGVldCkpO1xufVxuXG5mdW5jdGlvbiBzaGVldHNUb1J1bGVzKHNoZWV0cykge1xuICByZXR1cm4gcmVkdWNlLmNhbGwoXG4gICAgc2hlZXRzLFxuICAgIChhY2MsIHNoZWV0KSA9PiB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIC8vIEpTRE9NIGRvZXMgbm90IHN1cHBvcnQgcmVhZGluZyB0aGUgbWVkaWEgcHJvcGVydHkuLi4gd2lsbCBsaWtlbHkgbmVlZCB0b1xuICAgICAgICAvLyBmaWd1cmUgb3V0IGFub3RoZXIgd2F5IHRvIHVuaXQgdGVzdCB0aGlzIGZlYXR1cmUuIENvbW1lbnRlZCBvdXQgaW5zdGFuY2VzXG4gICAgICAgIC8vIHdoZXJlIHdlIGFzc2VydCBhZ2FpbnN0IHRoaXMgZmllbGQuIFdpbGwgbmVlZCB0byBmb2xsb3cgdXAgYWZ0ZXIgbWlncmF0aW9uLlxuICAgICAgICAvLyB7bWVkaWE6IHNoZWV0Lm1lZGlhLm1lZGlhVGV4dCwgcnVsZXM6IHNoZWV0VG9SdWxlcyhzaGVldCl9LFxuICAgICAgICB7bWVkaWE6IFwiXCIsIHJ1bGVzOiBzaGVldFRvUnVsZXMoc2hlZXQpfSxcbiAgICAgIF07XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQSxPQUFPQSxlQUFQLE1BQTRCLHFCQUE1QjtBQUNBLE9BQU9DLGVBQVAsTUFBNEIsV0FBNUI7QUFDQSxNQUFNQyxNQUFNLEdBQUdDLEtBQUssQ0FBQ0MsU0FBTixDQUFnQkYsTUFBL0I7QUFDQSxNQUFNRyxHQUFHLEdBQUdGLEtBQUssQ0FBQ0MsU0FBTixDQUFnQkMsR0FBNUI7QUFFQUMsSUFBSSxDQUFDLGtCQUFELEVBQXFCLE1BQU07RUFDN0IsTUFBTUMsUUFBUSxHQUFHLElBQUlOLGVBQUosRUFB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